# 統合作業まとめ

[Github ISSUE] https://github.com/lifull/madoguchi-web/issues/901

[関連ファイルの調査]
- category別の表示
https://docs.google.com/spreadsheets/d/1J52EFWNslRLYeRBsESFHXYUv8pxIMEqYq9ZI2FveadA/edit?gid=856315678#gid=856315678&fvid=186095749

[Confluence]
001_03_04_Blue Monkey由来の不要コード削除、分散コードの統合およびStimulus化対応
https://jira.next-group.jp/wiki/pages/viewpage.action?pageId=491117245
- docs/migration_strategy_master.mdをまとめてコンフルに記載

[Target PJ home]
$ cd /Users/matsubah/projects/madoguchi-web

## 調査資料

[移行戦略マスタードキュメント]
/Users/matsubah/projects/madoguchi-web/docs/migration_strategy_master.md
- 全体のマスタープラン
- プロジェクトの背景と目的はここを参照
- 消さないで残す（統合作業完了後に削除予定）

[共通CSS統合戦略]
/Users/matsubah/projects/madoguchi-web/docs/common_assets_consolidation.md
その後見直し
- home_header_footer_common.cssはマージしないで単体で読み込む（現状通り）
- LP用のヘッダーデザインは別なので、lp_common.cssを新たに作り、そこにまとめる（既存のlp_common.cssをコピーしてまとめる）→後で既存のlp_common.cssと差分がなければどっちかだけ残す
/Users/matsubah/projects/madoguchi-web/app/assets/stylesheets/lp_common.css
- 消さないで残す（統合作業完了後に削除予定）

[カテゴリー別移行戦略]
/Users/matsubah/projects/madoguchi-web/docs/category_migration_strategy.md
その後見直し
- 上記同様、lp_common.cssはcommon.cssへマージせず、lpページで読み込むこととする
- 消さないで残す（統合作業完了後に削除予定）

[CSS統合優先度]
/Users/matsubah/projects/madoguchi-web/docs/css_consolidation_priority.md
- Temporary（統合作業完了後に削除予定）

/Users/matsubah/projects/madoguchi-web/docs/layout_consolidation_analysis.md
- Layout統合の調査結果
- 消さないで残す（統合作業完了後に削除予定）

## 作業

1つにまとめるcss
/Users/matsubah/projects/madoguchi-web/app/assets/stylesheets/common.css

[作業の記録とプロセス]
/Users/matsubah/projects/madoguchi-web/css_consolidation_market_pages.md

cssに出力する際は下記を守ること
- indent: 1tab = 2space
- cssの最後の要素は;を省かない
- できるだけ元のcssのままコピーして移行する（改行やインデントもそのまま）

## 今後の統合手順（改善版）

1. 統合前に既存のcommon.cssを確認
2. 重複するセレクタ・プロパティを特定
3. 重複部分を除外して、新規部分のみを追加
4. コメントで統合元を明記

## 今やりたいこと

- 作業に入ったが、作業を任せると資料ごとに作業の方法が異なり、結果common.cssの内容が移り変わる。
もう少し作業範囲を狭めながら、段階的にcommon.cssにまとめていきたい。
- 統合作業が終わったらcommon.cssとページごとの差分cssだけで、現状と同様に表示される状態になっていること。
- 理想は/dcms_media/の中身が無く、全て置き換わっていることだが、dcms_mediaを使用不可にするのは最後の工程にする。
- 今のcssを統合する事が目的なので、cssの内容が古かったりする場合はそのまま移行する。リファクタや修正は統合後に行う（現状との差分をわかりやすくするため）。
